angular.module("App",["ionic","ngCordova","ngAnimate","ui.mask","ngCookies"]).run(["$ionicPlatform","$sqliteService",function(e,t){e.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault(),t.preloadDataBase(!0)})}]).config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider","$compileProvider",function(e,t,o,n){n.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|file|blob|content|ms-appx|x-wmapp0):|data:image\/|img\//),n.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|ghttps?|ms-appx|x-wmapp0):/),o.scrolling.jsScrolling(ionic.Platform.isIOS()),e.state("home",{url:"/home",templateUrl:"templates/home.html",controller:"HomeController"}).state("app",{url:"/app","abstract":!0,controller:"AppController",templateUrl:"templates/menu.html",onEnter:function(e){null==localStorage.getItem("userSession")&&e.go("home")}}).state("app.gallery",{url:"/gallery",cache:!1,views:{viewContent:{templateUrl:"templates/gallery.html",controller:"GalleryController"}}}).state("app.item",{url:"/item",cache:!1,views:{viewContent:{templateUrl:"templates/item.html",controller:"ItemController"}}}).state("app.new-client",{url:"/new-client",cache:!1,views:{viewContent:{templateUrl:"templates/new-client.html",controller:"ItemController"}}}),t.otherwise(function(e,t){var o=e.get("$state");o.go("home")})}]),function(e,t){"use strict";function o(){return{restrict:"E",replace:!1,link:function(e,o){t.Platform&&(t.Platform.isWindowsPhone()||t.Platform.isIE()||"edge"===t.Platform.platform())&&o.attr("data-tap-disabled","true")}}}t.Platform.isIE=function(){return t.Platform.ua.toLowerCase().indexOf("trident")>-1},t.Platform.isIE()&&e.module("ionic").factory("$ionicNgClick",["$parse","$timeout",function(t,o){return function(n,r,i){var l=e.isFunction(i)?i:t(i);r.on("click",function(e){n.$apply(function(){n.clicktimer||(l(n,{$event:e}),n.clicktimer=o(function(){delete n.clicktimer},1,!1))})}),r.onclick=function(e){}}}]),e.module("ionic").directive("select",o)}(angular,ionic),window.queries=["DROP TABLE IF EXISTS Users;","CREATE TABLE Users (IdUser integer primary key autoincrement, Name text not null);","INSERT INTO 'Users' ('Name') VALUES ('Juan David Nicholls Cardona');","INSERT INTO 'Users' ('Name') VALUES ('Khriztian Moreno Zuluaga');","INSERT INTO 'Users' ('Name') VALUES ('Cristian Rivas Buitrago');","INSERT INTO 'Users' ('Name') VALUES ('Juan David Sánchez');","INSERT INTO 'Users' ('Name') VALUES ('Nicolas Molina');","INSERT INTO 'Users' ('Name') VALUES ('Miyamoto Musashi FIlander');","INSERT INTO 'Users' ('Name') VALUES ('Didier Hernandez');","INSERT INTO 'Users' ('Name') VALUES ('Luis Eduardo Oquendo Pérez');","INSERT INTO 'Users' ('Name') VALUES ('Carlos Rojas');","INSERT INTO 'Users' ('Name') VALUES ('Levano Castilla Carlos Miguel');"],function(){"use strict";function e(e,t,o){e.exitApp=function(){ionic.Platform.exitApp()},null==localStorage.getItem("userSession")&&o.go("home"),t.fromTemplateUrl("templates/modals/popover.html",{scope:e}).then(function(t){e.popover=t}),e.signOut=function(){localStorage.removeItem("userSession"),o.go("home")},e.openPopover=function(t){e.popover.show(t)},e.$on("$destroy",function(){e.popover.remove()})}angular.module("App").controller("AppController",e),e.$inject=["$scope","$ionicPopover","$state"]}(),function(){"use strict";function e(e,t,o){null==localStorage.getItem("userSession")&&t.go("home"),e.openItem=function(e){t.go("app.item")},e.addNewClient=function(e){t.go("app.new-client")}}angular.module("App").controller("GalleryController",e),e.$inject=["$scope","$state","$http"]}(),function(){"use strict";function e(e,t,o,n,r,i,l){e.users=[],e.HelloWorld=function(){t.alert({title:"Hello World",template:"This is the best template to start with Ionic Framework!",cssClass:"animated bounceInDown"})},e.showUsers=function(){o.openModal(e,"templates/modals/users.html","animated rotateInDownLeft")},e.closeModal=function(){o.closeModal(),e.users=[]},e.user={},e.signIn=function(){console.log(e.user),r.post("https://www.online.uz:3007/elma/uz/api/auth/signin.json",e.user).success(function(e){console.log(e),localStorage.setItem("userSession",e.data.token),i.go("app.gallery"),l.userInfo=e.data}).error(function(e,t,o,n){console.log(e,t,o,n)})}}angular.module("App").controller("HomeController",e),e.$inject=["$scope","$ionicPopup","Modals","Model","$http","$state","$rootScope"]}(),function(){"use strict";function e(e,t,o,n,r,i,l,a,c){e.item={title:t.title,icon:t.icon,color:t.color},e.closeModal=function(){a.closeModal()},e.toggleProducts=function(){"none"==$(".products-list").css("display")?($(".order-inputs").slideUp(),$(".products-list").slideDown()):($(".order-inputs").slideDown(),$(".products-list").slideUp())};var s=new Date;console.log(s.getFullYear()+("0"+(s.getMonth()+1)).slice(-2)+("0"+s.getDate()).slice(-2)+("0"+s.getHours()+1).slice(-2)+("0"+s.getMinutes()).slice(-2)+("0"+s.getSeconds()).slice(-2)),e.order={},e.newClient={},e.final_order={},e.placeOrder=function(){i.post("https://www.online.uz:3007/elma/uz/api/elma/point.json",e.newClient).then(function(e){console.log("success",resonse)},function(e){console.log("Error",e)})},e.showUsers=function(){e.order.products=[];new Date;e.final_order={active:1,agent:e.order.agent._id,date:"2018-02-24T06:19:13.052Z",from_point:e.order.priceList.point,location:{address:"sample address"},priceList:e.order.priceList._id,status:{type:"sell"},products:[]},e.products.forEach(function(t){t.items.forEach(function(t){0!=t.total&&(e.order.products.push(t),e.final_order.products.push({product:t._id,count:t.total_boxes,prices:[{currency:"UZB",price:t.total,kurs:1}]}))})}),a.openModal(e,"templates/modals/users.html","animated rotateInDownLeft")},e.place_order=function(){c.show({content:"Loading",animation:"fade-in"}),console.log(e.final_order),i({method:"POST",url:"https://www.online.uz:3007/elma/uz/api/elma/action.json",data:e.final_order}).then(function(e){console.log(e),c.hide(),c.show({content:e.data,animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:0})},function(e,t,o,n){console.log(e,t,o,n),c.hide(),alert("Erro Occured")})},e.sum=function(){var t=0;e.products.forEach(function(o){o.items.forEach(function(o){0!=o.total&&(t+=o.total,e.totalOrderPrice=t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "))})})},e.confirmPopover=function(){},e.item_subtotal=function(e,t,o,n,r,i){var l=0,a=0;return"number"==typeof o&&(l=o*n),"number"==typeof e&&(e*=t,a=e*n),r=0!=l&&0==a?l:0==l&&0!=a?a:a+l,i.total=r,i.total_boxes=r/n,r.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")},e.updatePriceList=function(t){i.get("https://www.online.uz:3007/elma/uz/api/elma/point-data/5901d0de5d9dcb0000000000/pricelist/"+t._id+".json").success(function(t){e.byPrice=t.data.data,e.byPrice.forEach(function(t){e.sub_products.forEach(function(e){t.product==e._id?e.price=t.prices:"null"==e.price})})}).error(function(e){console.log(e)})},e.numberWithSpaces=function(e){if(void 0!=e)return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")},i.get("https://www.online.uz:3007/elma/uz/api/attr/product.category.json?limit=all").success(function(t){console.log(t.data),e.products=t.data,i.get("https://www.online.uz:3007/elma/uz/api/elma/product.json?limit=all").success(function(t){e.sub_products=t.data,e.products.forEach(function(t){t.items=[],e.sub_products.forEach(function(e){t._id==e.category&&(e.total=0,t.items.push(e))})}),console.log(e.products)}).error(function(e){console.log(e)})}).error(function(e){console.log(e)}),i.get("https://www.online.uz:3007/elma/uz/api/elma/point.json?limit=all&select=number,agent,title,phone,type,location").success(function(t){e.agent_clients=t.data,e.agents=e.agent_clients.filter(function(e){return"agent"==e.type[0]}),e.clients=e.agent_clients.filter(function(e){return"client"==e.type[0]})}).error(function(e){console.log(e)}),i.get("https://www.online.uz:3007/elma/uz/api/elma/point-data/5901d0de5d9dcb0000000000/pricelist.json").success(function(t){e.pricelist=t.data}).error(function(e){console.log(e)}),i.get("https://www.online.uz:3007/elma/uz/api/attr/region.json?limit=all").success(function(t){e.regions=t.data,console.log(e.regions)}).error(function(e){console.log(e)}),e.filterClients=function(t){e.clientById=e.clients.filter(function(e){return e.agent==t._id})},e.toggleGroup=function(e){e.show=!e.show},e.isGroupShown=function(e){return e.show};var u=new Date,p=u.getDate(),d=u.getMonth()+1,m=u.getFullYear();p<10&&(p="0"+p),d<10&&(d="0"+d);var u=p+"/"+d+"/"+m;e.order.date=u}angular.module("App").controller("ItemController",e),e.$inject=["$scope","$stateParams","$ionicViewSwitcher","$state","$ionicHistory","$http","$rootScope","Modals","$ionicLoading"]}(),function(){"use strict";function e(e){return{restrict:"A",link:function(t,o,n){e.on("hold",function(e){var t=o[0].querySelector(".item-content"),n=o[0].querySelector(".item-options"),r=n.offsetWidth;ionic.requestAnimationFrame(function(){t.style[ionic.CSS.TRANSITION]="all ease-out .25s",n.classList.contains("invisible")?(n.classList.remove("invisible"),t.style[ionic.CSS.TRANSFORM]="translate3d(-"+r+"px, 0, 0)"):(t.style[ionic.CSS.TRANSFORM]="",setTimeout(function(){n.classList.add("invisible")},250))})},o)}}}angular.module("App").directive("holdList",e),e.$inject=["$ionicGesture"]}(),function(){"use strict";function e(e,t){return{restrict:"E",scope:{options:"="},controller:function(o,n,r){o.multipleSelect={title:r.title||"Select Options",tempOptions:[],keyProperty:r.keyProperty||"id",valueProperty:r.valueProperty||"value",selectedProperty:r.selectedProperty||"selected",templateUrl:r.templateUrl||"templates/multipleSelect.html",renderCheckbox:!r.renderCheckbox||"true"==r.renderCheckbox,animation:r.animation||"slide-in-up"},o.OpenModalFromTemplate=function(t){e.fromTemplateUrl(t,{scope:o,animation:o.multipleSelect.animation}).then(function(e){o.modal=e,o.modal.show()})},t.on("tap",function(e){o.multipleSelect.tempOptions=o.options.map(function(e){var t={};return t[o.multipleSelect.keyProperty]=e[o.multipleSelect.keyProperty],t[o.multipleSelect.valueProperty]=e[o.multipleSelect.valueProperty],t[o.multipleSelect.selectedProperty]=e[o.multipleSelect.selectedProperty],t}),o.OpenModalFromTemplate(o.multipleSelect.templateUrl)},n),o.saveOptions=function(){for(var e=0;e<o.multipleSelect.tempOptions.length;e++)for(var t=o.multipleSelect.tempOptions[e],n=0;n<o.options.length;n++){var r=o.options[n];if(t[o.multipleSelect.keyProperty]==r[o.multipleSelect.keyProperty]){r[o.multipleSelect.selectedProperty]=t[o.multipleSelect.selectedProperty];break}}o.closeModal()},o.closeModal=function(){o.modal.remove()},o.$on("$destroy",function(){o.modal&&o.modal.remove()})}}}angular.module("App").directive("ionMultipleSelect",e),e.$inject=["$ionicModal","$ionicGesture"]}(),function(){"use strict";function e(e,t){return{restrict:"E",scope:{options:"=",optionSelected:"="},controller:function(o,n,r){o.searchSelect={title:r.title||"Search",keyProperty:r.keyProperty,valueProperty:r.valueProperty,templateUrl:r.templateUrl||"templates/searchSelect.html",animation:r.animation||"slide-in-up",option:null,searchvalue:"",enableSearch:!r.enableSearch||"true"==r.enableSearch},t.on("tap",function(e){o.searchSelect.keyProperty&&o.searchSelect.valueProperty?o.optionSelected&&(o.searchSelect.option=o.optionSelected[o.searchSelect.keyProperty]):o.searchSelect.option=o.optionSelected,o.OpenModalFromTemplate(o.searchSelect.templateUrl)},n),o.saveOption=function(){if(o.searchSelect.keyProperty&&o.searchSelect.valueProperty)for(var e=0;e<o.options.length;e++){var t=o.options[e];if(t[o.searchSelect.keyProperty]==o.searchSelect.option){o.optionSelected=t;break}}else o.optionSelected=o.searchSelect.option;o.searchSelect.searchvalue="",o.modal.remove()},o.clearSearch=function(){o.searchSelect.searchvalue=""},o.closeModal=function(){o.modal.remove()},o.$on("$destroy",function(){o.modal&&o.modal.remove()}),o.OpenModalFromTemplate=function(t){e.fromTemplateUrl(t,{scope:o,animation:o.searchSelect.animation}).then(function(e){o.modal=e,o.modal.show()})}}}}angular.module("App").directive("ionSearchSelect",e),e.$inject=["$ionicModal","$ionicGesture"]}(),function(){"use strict";function e(e){var t=[],o=function(o,n,r){return e.fromTemplateUrl(n,{scope:o,animation:r||"slide-in-up",backdropClickToClose:!1}).then(function(e){t.push(e),e.show()})},n=function(){var e=t.splice(-1,1)[0];e.remove()},r=function(){t.map(function(e){e.remove()}),t=[]};return{openModal:o,closeModal:n,closeAllModals:r}}angular.module("App").factory("Modals",e),e.$inject=["$ionicModal"]}(),function(){"use strict";function e(e){return{Users:e}}angular.module("App").factory("Model",e),e.$inject=["Users"]}(),function(){"use strict";function e(){return function(e,t){var o=[],n=[];return angular.forEach(e,function(e){var r=e[t];n.indexOf(r)===-1&&(n.push(r),o.push(e))}),o}}angular.module("App").filter("unique",e)}(),function(){"use strict";function e(e,t){var o,n=this;n.db=function(){return o||(o=void 0!==window.sqlitePlugin?window.sqlitePlugin.openDatabase({name:"pre.db",location:2,createFromLocation:1}):window.openDatabase("pre.db","1.0","Database",2e5)),o},n.getFirstItem=function(t,o){var r=e.defer();return n.executeSql(t,o).then(function(e){return e.rows.length>0?r.resolve(e.rows.item(0)):r.reject("There aren't items matching")},function(e){return r.reject(e)}),r.promise},n.getFirstOrDefaultItem=function(t,o){var r=e.defer();return n.executeSql(t,o).then(function(e){return e.rows.length>0?r.resolve(e.rows.item(0)):r.resolve(null)},function(e){return r.reject(e)}),r.promise},n.getItems=function(t,o){var r=e.defer();return n.executeSql(t,o).then(function(e){for(var t=[],o=0;o<e.rows.length;o++)t.push(e.rows.item(o));return r.resolve(t)},function(e){return r.reject(e)}),r.promise},n.preloadDataBase=function(t){var o=e.defer();return void 0===window.sqlitePlugin?(t&&console.log("%c ***************** Starting the creation of the database in the browser ***************** ","background: #222; color: #bada55"),n.db().transaction(function(e){for(var o=0;o<window.queries.length;o++){var n=window.queries[o].replace(/\\n/g,"\n");t&&console.log(window.queries[o]),e.executeSql(n)}},function(e){o.reject(e)},function(){t&&console.log("%c ***************** Completing the creation of the database in the browser ***************** ","background: #222; color: #bada55"),o.resolve("OK")})):o.resolve("OK"),o.promise},n.executeSql=function(e,o){return t.execute(n.db(),e,o)}}angular.module("App").service("$sqliteService",e),e.$inject=["$q","$cordovaSQLite"]}(),function(){"use strict";function e(e,t){return{getAll:function(){var o="Select * FROM Users";return e.when(t.getItems(o))},add:function(o){var n="INSERT INTO Users (Name) VALUES (?)";return e.when(t.executeSql(n,[o.Name]))}}}angular.module("App").factory("Users",e),e.$inject=["$q","$sqliteService"]}();